sentences = ["L'autre jour, moé pis ma gang d'imbéciles, on était pas mal saoul-e-s.", "Malgré l'fait que j'paye pas d'taxes, que j'fraude le BS, que j'travaille en d'ssous d'la table pis que j'vole ma bière comme tout bon citoyen, j'ai cru bon de m'insurger sur un petit détail assez troublant, merci.... Tabarnak !  FUCK YOU KALISS!", "Mon ami-e m’a dit de l’attendre dehors pendant qu’ille allait chercher sa médication à pharmacie parce que j’étais trop torchée pour rentrer avec sans que tout ça paraisse louche.", "Faque j’ai entrepris de l’envoyer paître le plus grossièrement possible.", "Tsé, quand t’es partie sur une lancée.", "Faque j’t’allé-e me statcher coin Pie-IX Notre-Dame pis j’ai l’intention de rester là, à casser les oreilles à tout le monde.  L’osti de guignolée des médias est su’l coin!", "Un son désagréable vient soudainement me sortir de mes pensées.", "C’est un agent de sécurité qui lui crie.", "Toi, mon criss de guignol qui empoche les bénéfices du haut de la tour TVA, ta gueule.", "Le temps des fêtes arrivait, j'avais pas d'job pis j'commençais à être sérieusement dans' marde.", "Si l'hiver c'est dull pis déprimant, y'a pas d'quoi rire quand t'as pus d'argent pour boire ou t'droguer pour passer l'temps.", "J'commençais à stresser un peu fait que j'suis allé porter des CV, histoire de faire une passe de cash rapido presto et retourner ma tapir dans les couvertes de mon lit.", "Mais ça' l'air que j'avais pas l'hypocrisie dans l'piton pour amadouer ces imbéciles de boss et aucun d'eux n'a voulu de mon air bête pis de mes mauvaises intentions.", "Aucun, excepté Toys R us.", "J'étais pas friand à l'idée, mais d'la bière cheap pis un loyer, ça se paye pas en se morfondant.", "Ben non criss de fou.", "Fuck you Toy R us.", "C'était le temps des fêtes fait que j'ai dû quitter mon p'tit cocon de centre-ville pour faire une tour en banlieue.", "Des fois, je me trouve juvénile un peu.", "J'me suis tapé Braveheart en fumant un bat pour m'endormir.", "J'ai ouvert Diablo II et me suis vite loggé sur battle.net.", "Criss de bande de caves.", "Je le sais, criss de porc.", "Imbécile. #Post-gauche.", "Fuck you.", "La piaule était grosse en tabarnak, y'avait une cinquantaine de personnes pis ça jouait à des jeux d'alcool comme pour oublier que leur party était dull en criss.  Pis la caisse de Pabst itou.", "Je me suis mis à leur jaser pis pour que je leur criss la paix ils m'ont fait un gin tonique que j'ai demandé double.", "Déjà la soirée me semblait moins minable.", "Je suis allé me stasher dans un coin pis j'ai siroté mon drink.", "Il était en câlisse ben raide.", "Quelqu'un avait volé notre caisse de Pabst.", "Le party était donben dull pour que j'aille le goût de fesser sur des kids pour me désennuyer.  J'étais un peu pogné.", "Les ados, c'est cave, pareil.  Quand je me suis réveillé, j't'allé chier.", "Y'avait d'la pisse partout sur le tour du bol pis ça empestait le tabarnak.", "Ark!", "J'étais en hostie.", "Hostie de tabarnak!", "C'était donc moi le cave qui avait pissé tout croche en revenant du bar.", "Hostie d'innocent.", "C’était une paisible soirée de printemps et je me dirigeais avec mon coloc moustachu vers une librairie de bobos sur le plateau pour le lancement d'une revue étudiante.", "On avait commencé à boire assez tôt dans la journée par appréhension de la chose.", "On est arrivés en avance dans le coin, le temps d’une Pabst en canette chacun avant de se pointer là-bas.", "On a fini par se rendre au lancement, assez saouls pour se câlisser des hipsters, bobos, étudiants en littérature et autres gens propres.", "Le buffet de pizzas fancys et les boîtes de vin ont vite fait d’attirer notre attention.", "Comme à mon habitude dans ce genre d’évènements, j’ai pas dit un mot à personne pis j’me suis posté à côté de la bouffe et de la boisson gratis pour me goinfrer.", "Le quatre litres de vin rouge était jammé fait que j’ai décidé de me pitcher dans le blanc mais mon coloc a pas lâché le morceau.", "Y’a percé un trou dans le top du sac et il s’est versé un verre direct à partir du trou.", "Là j’suis sorti.", "Mon coloc m’a rejoint le temps que je m’allume une top pis on a sacré notre camp.", "Il nous restait une Pabst qu’on a bue en marchant au hasard.", "C’était rempli de monde qui trouvait qu’on puait et la bière coutait très cher.", "On était ben loin de piller du rhum pis de faire brûler du char.", "C'est pas mêlant, j'haïs le covoiturage.", "Ça doit être la pire invention depuis l'automobile elle-même.", "MANGEZ D'LA MARDE.", "Bande de morons de marde!", "Mangez de l'hostie de marde.", "FUCK YOU ALL!", "FUCK LES CHARS!", "Vous pensiez que l’Antécrise était virée militant-e? Non, on est juste hypocrites!", "Nous avons sans scrupule instrumentalisé la (presque) grève sociale dans le but d’accumuler les « likes » et « shares » sur notre page Facebook.", "Fallait bien que la grève profite à quelqu’un, t’sais, tant qu’à échouer politiquement.", "J'ai voulu écrire «Fuck l'austérité» pis je me suis demandé ce que je pensais réellement, fait que j'ai écrit «Fuck toute». J'en suis venu à la conclusion que c'est parce qu'on est caves.", "Fuck risquer l'emprisonnement pour mes idées politiques.", "J'abandonne.", "Fuck mon opinion.", "Fuck l'anarchie.", "Fuck l'espoir.", "On est descendus samedi dernier à Québec à l’occasion de la marche « pour le climat ». On a pris nos cliques pis nos claques (beaucoup de bières) et on est embarqués dans un bus payé par l’ASSÉ.", "Le plan était simple : aller à une manif où les chances de se faire gazer étaient minimes, dépasser la quantité d’alcool humainement possible de consommer et tester notre luck.", "On a gagné.", "À mi-chemin, j’étais déjà assez torché et j’ai commencé à crier des affaires comme « fuck l’ASSÉ » en ne sachant pas que la porte-parole par intérim trônait à mes côtés.", "Même mes amis les plus dangereusement débiles m’ont dit de fermer ma yeule et ils avaient raison.", "Ça, c’était avant que l’un d’eux dégénère et que les rôles de gardiennage s'inversent.", "J’avais câlissement envie de pisser.", "J’ai crié d’autres niaiseries sans fondement sur l’ASSÉ parce que j’étais trop saoul.Too bad.", "Y’était juste 13h, t'sais.  Bref, on est restés assis à boire et à crier des multiples slogans débutant immanquablement par «fuck». On était bien startés à avoir un débat de fond et je pense que c’est ça qui a effrayé les familles qui avaient tendance à déserter notre compagnie.", "On a acheté un 6-pack supplémentaire pour prendre le bus.  Avec du recul, c’était surement notre faute, mais sur le coup, on s’en câlissait bien.", "Vous auriez dû le voir marcher tout croche sur Grande-Allée à essayer de renverser des cônes en criant des injures aux gens.", "J’avais de la misère à lui dire de se calmer parce que sa tirade contre l’ASSÉ était fucking drôle et déconstruite.  Miracle : aucun flic ne nous a vus.", "On a finalement pris le bus de 19h en la compagnie inopportune d’un « viking communiste » qui flashait ses actions les plus rads pour cruiser sa voisine.", "On a pris du Ritalin sans raison, juste parce qu’on est caves.", "On s’est ENFIN échoués dans notre minable appartement, couchés à terre, pour regarder le film d’action xXx, parce que y’a Vin Diesel dedans.", "Merci à l’ASSÉ pour les bus gratos pis la ride de marde.", "Ça me tentait de dire fuck off à toute dans vie.  tout le monde aime ça s’crosser... mais péter des vitres itou c’est l’fun.", "Eh bien moi, j’haïs les flics.", "L’envie incontrôlable de les insulter m’envahit et j’angoisse à la simple vue de leur uniforme.  Pour moi, la police, c’est des crampes d’estomac.", "Je me suis senti révolté.", "Ça me mettait en tabarnak.", "Je suis alors retourné me coucher, la rage au cœur et le sang qui bouillonnait.", "J’ai été câlissement désagréable et c’est déjà ça de gagné.", "Je vous invite à faire pareil avec les flics.", "Pis après ça j'en ai eu plein le cul de militer, fait que j'ai rebroussé chemin.", "Pis j'ai été acheter un six pack de Black Label au dep au coin d'ma rue où qui a plus de caméras que de choix de bière.", "J'suis rentré chez nous avec l'hostie d'idée que le monde que j'haïs le moins est toute en train de marcher en arrière d'un pick-up qui hurle des slogans prémâchés.", "Si j'vire assez saoul, j'vas leur pitcher mes vides.", "Là, j'bois tout seul pis j'commence à avoir hâte en criss qu'on la sorte cette hostie d'Antécrise-là parce qu'à part être la seule affaire qui me rejoint un peu -avec peut-être la ConsDep, chier à côté d'la bol pis voler d'la bière- c'est aussi la seule fois où j'sens que mes idées trouvent de l'écho.", "J'sais ben que le lectorat de l'Antécrise est imaginaire, aux trois quarts adolescent pis complètement en désaccord avec la plupart du contenu, mais ça me fait du bien pareil que du monde examine ma marde avant de conclure que je chie pas mieux qu'un-e autre.", "On était tranquillement installés sur le parvis de l'église à boire des gins toniques pis à envoyer chier systématiquement tou-te-s les passant-e-s.", "Mon amie criait «Fuck everybody!", "Fuck you all!» on était trop saouls pour que ça marche, fait qu'on s'est contenté-e-s de continuer à vociférer des insultes - une activité qui se raffine avec l'augmentation de l'alcolémie, c'est bien connu.", "Le monde avait l'air de nous trouver caves, mais ça, c'est pas très différent de d'habitude.", "On a vu le char de boeufs passer lentement, les bovins à l'intérieur nous spotter, le véhicule s'immobiliser pis notre haine fleurir.", "Les deux derniers verres de gin, crissement forts pour vider la bouteille et pouvoir la jeter, constituaient les seules preuves de notre illégalité: il nous a semblé logique de les caler.", "Gloup, gloup, gloup, câlisse y'en restait beaucoup, gloup, gloup, gloup.", "Les flics ont rappliqué avec leur face porcine.", "Sérieusement, illes ressemblaient tellement à des cochons que les appeler \"les porcs\" relève à peine de l'injure.", "Mon amie chaude raide leur a dit que c'était sûrement sa faute.", "Elle a cru bon exemplifier ses plus récentes vociférations aux cochons: «Je criais \"mangez d\'la marde câlisse!", "Je voulais rien faire de mal; juste les envoyer chier!» Elle a comme viré plus fâchée tout à coup.", "Là, les porcs commençaient à s'impatienter.", "Le goret était en câlisse.", "On a cru bon sacrer notre camp à ce moment-là, tout en la traitant d'une panoplie de noms porcins.", "Criss de bande de débiles armés sans génie.", "Eille!", "Mangez d'la marde pis tuez-vous calvaire!", "On est passés par le dépanneur juste avant qu'il ferme pis on s'est acheté une caisse de 12 qu'on est allés boire dans les ruines d'un cinéma en démolition, loin des touristes, des passant-e-s pis surtout des flics.", "Pis c'était le fun en tabarnaque.", "Des chars qui se rentrent dedans, esti!", "C'est malade esti!", "J'ai vu des chars pogner en feu, perdre des roues, virer sur le côté, toute le kit.", "Y'avait même un nain sur un pocket bike.", "UN NAIN SUR UN POCKET BIKE!", "Fuck les chars, pareil.", "Quelle gnéserie!", "Il était 3 heures 45 du matin et j’étais saoul à ne rien faire, assis sur le divan.  C’est vraiment une heure de marde 3h45 parce que c’est le moment où je manque de bière pis que les bars sont fermés.", "Je finis ma bière.", "C’est la dernière.", "Je fais le tour des corps morts en espérant rescaper un fond de bouteille oublié.", "Je trouve une bière à moitié pleine qui date clairement d’avant-hier.", "C’est flat en tarbarnak.", "C’est pas que ça m’aurait fait grand chose, un accident: j’suis pas bien bien empathique en général, mais du feu, des explosions, des morts, c’est toujours un peu excitant.", "L’hiver est long et je manque de bière.", "Je refais mon tour des corps morts : c’est vain et je le sais.", "Et juste au moment où je suis prêt à me laisser mourir d’ennui, un énorme rat fait éruption dans le salon, détournant ainsi mes joyeuses pensées.", "C’est un hostie de gros rat.", "Ça galope en tabarnak, ces salauds-là.", "Et soudainement, silence.", "En effet, le cul, c’est de là que la marde sort, mais contrairement à la croyance populaire c’est pas là que la marde attend d’avoir 18 ans afin de pouvoir quitter ses parents fesse gauche et fesse droite.", "En passant, c’est ben l’fun.", "On a beau dire “fuck toute”, moi je dis “fuck toute sauf la sodomie”. Le truc c’est beaucoup de bon lubrifiant.Après dix ans passés à consommer de l'alcool comme remède à l'angoisse existentielle, c'est dur d'arrêter.", "Pis là, c'est la grève, les manifs et tout.", "J'entends du monde chanter la révolution, le changement social, mais j'arrive pas à m'y identifier.", "Généralement, je marche en silence et je m'abstiens.", "J'ferme ma gueule.", "J'ai la ferme impression que l'humanité a dépassé le point de non-retour y a longtemps en criss pis qu'avant de faire un seul pas dans le bon sens, il faudrait faire table fucking rase.", "Et que ça n'arrivera jamais.", "J'pense que la société s'en va vers un mur et je l'accepte.", "J'espère pas renverser la vapeur, mais j'ai envie que le monde sache que j'endosse pas son criss de système.", "Si je manifeste, c'est pour l'envoyer chier.  À vrai dire, j'pense que je suis surtout déçu, d'la politique, des humains, du militantisme, de l'organisation sociale, des nouvelles, du changement, des promesses, des idées, d'la vie.", "Chus déçu que mes parents aient cru bon me mettre au monde, pis que les gens continuent à faire ça, aussi.", "Je suis assez amer par rapport à tout, j'trouve qu'on est caves en câlisse.", "Fait que je prend mon cynisme, ma résolution et mon apathie à deux mains pis je répond oui.", "Tant pis pour les autres.", "Moi j'm'en câlisse.", "J'me reconnais pas dans cette vie-là, mais j'ai accepté que je gagnerai jamais, que leurs décisions sont prises depuis un criss de bout pis que la seule hostie d'affaire qui peut me faire plaisir, c'est d'm'occuper en attendant d'mourir pis d'les envoyer chier en silence.", "Fait que j'dis oui, j'ferme ma gueule, j'vas me chercher un six-pack ou un 13oz, pis je r'bois mes larmes par en d'dans.", "C'est comme pas l'best, mais c'est mon criss de problème.", "J'vous laisse tranquilles avec vos missiles, vos VUS, votre Colisée Vidéotron, votre Phare de 65 étages, votre charte des valeurs, votre course à la chefferie, vos maisons bien rangées, vos jobs, votre linge pis votre hostie de société à marde, fait que laissez-moi donc m'tuer une Pabst à la fois bande d'hypocrites."]

imageUrls = ["1.jpg","2.jpg","3.jpg","4.jpg","5.jpg","6.jpg","7.jpg","8.jpg","9.jpg","10.jpg"]

nbrKeySounds = 16;
audio = [];

for(i=0; i< nbrKeySounds; i++) {
	audio.push(new Audio('sound/chopW_'+i+'.wav'))
}

WRITING = false;
TIMEOUT = -1;

minPhrases = 5;
nbrMoyenPhrases = 5;

function ChangeBackground() {
	n = imageUrls.length;
	i = Math.floor( Math.random() * n );
	document.getElementById("background").style.background="url("+imageUrls[i]+")";
}


R = false;
function GenerateSentences() {
	SKIP = false;//SPEED
	document.getElementById("main-txt").innerHTML = "";

	wrapRight = "</span></span>";
	
	M = 10.0;	// Paramètre de concentration autour de la moyenne.
	r = 0;
	for( i = 0; i < 2*M; i++) {
		r += Math.random();
	}
	r = r / M; // 0 <= r <= 1 est aléatoire, concentré avec paramètre M autour de 1/2.
	
	nbrPhrase = randomNumberSentences(minPhrases, sentences.length, nbrMoyenPhrases, 10);
	
	i = 0
	function writeSentence(i) {
		WRITING = true;
		document.getElementById("main-txt").innerHTML += "<span id=\"linewrapper\"><span class=\"whiteline\" id=\"whiteline"+i+"\">" + wrapRight;
	
		k = Math.floor(Math.random() * sentences.length);
		letter = 0
		if(i < nbrPhrase){
			if (R) skipToSentence();
			else writeLetter()
		}
		else {
			WRITING = false;
		}
		
		function skipToSentence() {
			document.getElementById("whiteline"+i).innerHTML += sentences[k];	
		}
		
		function writeLetter(){
			document.getElementById("whiteline"+i).innerHTML += sentences[k].charAt(letter) ;
			//audio[math.floor(nbrKeySounds*Math.random())].play()
			
			letter+=1;
			if(letter < sentences[k].length) {
				if(SKIP) writeLetter()
				
				else if (sentences[k].charAt(letter-1) == ' ') TIMEOUT = setTimeout(writeLetter, (30 + Math.random()*20));
				else if (sentences[k].charAt(letter-1) == ',') TIMEOUT = setTimeout(writeLetter, (100 + Math.random()*150));
				else if (Math.random() < 0.9 ) TIMEOUT = setTimeout(writeLetter, (30 + Math.random()*20))
				else TIMEOUT = setTimeout(writeLetter, (30))
			}
			else {
				TIMEOUT = setTimeout(function(){writeSentence(i+1)}, R*(180 + Math.random()*300))
			}
		}
	};
	writeSentence(0);	
}

function randomNumberSentences(min, max, moyenne, dispersion) {
	
	r = 0;
	for( i = 0; i < 2*dispersion; i++) {
		r += Math.random();
	}
	r = r / dispersion; // 0 <= r <= 1 est aléatoire, concentré avec paramètre M autour de 1/2.
	
	return Math.min(min + Math.floor( moyenne * r ), max );
}

function GenerateBackgroundTxt(){	
	s = ""
	for (i=0; i < 20; i++) {
		s += sentences[Math.floor(Math.random() * sentences.length)];
	}
	
	for (i=0; i < 50; i++){
		document.getElementById("background-txt").innerHTML += s.substring(Math.floor(Math.random()*100));
	}
}

ChangeBackground();

GenerateBackgroundTxt();

window.onload = onLoad;

function onLoad() {
	TIMEOUT = setTimeout(GenerateSentences, 1000)
	//Précharger les images
	for(i=1; i <=imageUrls.length; i++ ) {
		e = document.createElement("div");
		document.body.appendChild(e);
		e.style.background = "url("+i+".jpg) no-repeat -9999px -9999px";
	}
}

function onKeydown(e) {
	if (e.keyCode == 13) {
		SKIP = true;
	}

	if (e.keyCode == 116 || e.keyCode == 82){
		e.preventDefault();
		clearTimeout(TIMEOUT);
		document.getElementById("main-txt").innerHTML = "";
		ChangeBackground();
		TIMEOUT = setTimeout(GenerateSentences, 750);
	}
}

function onResize() {
	toppp = (window.innerHeight - 600)/2;
	console.log(toppp);
	document.getElementById("background").style.top = Math.max(0,toppp)+"px";
}

onResize();

document.addEventListener("keydown", onKeydown);
window.addEventListener("resize", onResize);

